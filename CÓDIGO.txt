%macro truncate_name(name);
    %if %length(&name) > 32 %then %substr(&name, 1, 32);
    %else &name;
%mend truncate_name;

%let long_dataset_name = dbo.TBDPPJ_PROD_AGIR_CAMBIO_REDE_E2_E3;
%let short_dataset_name = %truncate_name(&long_dataset_name);

data &short_dataset_name;
    set work.test_data;
run;
